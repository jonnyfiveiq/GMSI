FROM ansibleplaybookbundle/apb-base

LABEL "com.redhat.apb.spec"=\
"LS0tCnZlcnNpb246IDEuMApuYW1lOiByaGVsNzQtb24tdm13YXJlLWFwYgpkZXNjcmlwdGlvbjog\
UkhFTDc0IG9uIFZNV2FyZQpiaW5kYWJsZTogZmFsc2UKYXN5bmM6IG9wdGlvbmFsCm1ldGFkYXRh\
OgogIGRpc3BsYXlOYW1lOiBSSEVMNzQgb24gVk1XYXJlIChBUEIpCnBsYW5zOgotIG5hbWU6IGRl\
ZmF1bHQKICBkZXNjcmlwdGlvbjogRGVmYXVsdCBkZXBsb3ltZW50IHBsYW4gZm9yIFJIRUw3NCBv\
biBWTVdhcmUtYXBiCiAgZnJlZTogdHJ1ZQogIG1ldGFkYXRhOiB7fQogIHBhcmFtZXRlcnM6CiAg\
LSB0aXRsZTogQ0ZNRSBSZXF1ZXN0ZXIKICAgIG5hbWU6IGNmbWVfdXNlcgogICAgdHlwZTogc3Ry\
aW5nCiAgICByZXF1aXJlZDogdHJ1ZQogICAgZGlzcGxheV9ncm91cDogQ2xvdWRGb3JtcyBDcmVk\
ZW50aWFscwogIC0gdGl0bGU6IENGTUUgUGFzc3dvcmQKICAgIG5hbWU6IGNmbWVfcGFzc3dvcmQK\
ICAgIHR5cGU6IHN0cmluZwogICAgZGlzcGxheV90eXBlOiBwYXNzd29yZAogICAgcmVxdWlyZWQ6\
IHRydWUKICAgIGRpc3BsYXlfZ3JvdXA6IENsb3VkRm9ybXMgQ3JlZGVudGlhbHMKICAtIG5hbWU6\
IHZtX25hbWUKICAgIHRpdGxlOiBWTSBOYW1lCiAgICBkZWZhdWx0OiAnJwogICAgZGlzcGxheV9n\
cm91cDogTmV3IHRhYi9WTSBEZXRhaWxzCiAgICB0eXBlOiBzdHJpbmcKICAgIHJlcXVpcmVkOiBm\
YWxzZQo="

COPY playbooks /opt/apb/actions
COPY roles /opt/ansible/roles
RUN chmod -R g=u /opt/{ansible,apb}
USER apb
